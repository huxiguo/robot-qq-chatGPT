{
  "version": 3,
  "sources": ["../../node_modules/@koishijs/client/client/data.ts", "../../node_modules/marked-vue/src/index.ts", "../../node_modules/@koishijs/client/client/components/common/index.ts", "../../node_modules/schemastery-vue/src/index.ts", "../../node_modules/schemastery-vue/src/icons/index.ts", "../../node_modules/cosmokit/src/misc.ts", "../../node_modules/cosmokit/src/array.ts", "../../node_modules/cosmokit/src/binary.ts", "../../node_modules/cosmokit/src/string.ts", "../../node_modules/cosmokit/src/time.ts", "../../node_modules/schemastery/src/index.ts", "../../node_modules/schemastery-vue/src/utils.ts", "../../node_modules/@koishijs/client/client/components/index.ts", "../../node_modules/@koishijs/client/client/components/icons/index.ts", "../../node_modules/@koishijs/client/client/components/layout/index.ts", "../../node_modules/@koishijs/client/client/components/layout/utils.ts", "../../node_modules/@koishijs/client/client/components/notice/index.ts", "../../node_modules/@koishijs/client/client/components/slot.ts", "../../node_modules/@satorijs/components/src/chat/index.ts", "../../node_modules/@satorijs/components/src/popper/index.ts", "../../node_modules/@satorijs/components/src/popper/shared.ts", "../../node_modules/@satorijs/components/src/virtual/item.ts", "../../node_modules/@satorijs/components/src/virtual/index.ts", "../../node_modules/@koishijs/client/client/index.ts", "../../node_modules/@koishijs/client/client/loader.ts", "../../node_modules/cordis/src/context.ts", "../../node_modules/cordis/src/events.ts", "../../node_modules/cordis/src/registry.ts", "../../node_modules/cordis/src/scope.ts", "../../node_modules/cordis/src/utils.ts", "../../node_modules/cordis/src/service.ts", "../../node_modules/@koishijs/client/client/activity.ts", "../../node_modules/@koishijs/client/client/context.ts"],
  "sourcesContent": ["import { AbstractWebSocket, ClientConfig, Console, DataService, Events } from '@koishijs/plugin-console'\nimport { Promisify } from 'koishi'\nimport { markRaw, reactive, ref } from 'vue'\nimport { useLocalStorage } from '@vueuse/core'\n\ninterface StorageData<T> {\n  version: number\n  data: T\n}\n\nexport function createStorage<T extends object>(key: string, version: number, fallback?: () => T) {\n  const storage = useLocalStorage('koishi.console.' + key, {} as StorageData<T>)\n  const initial = fallback ? fallback() : {} as T\n  if (storage.value.version !== version) {\n    storage.value = { version, data: initial }\n  } else if (!Array.isArray(storage.value.data)) {\n    storage.value.data = { ...initial, ...storage.value.data }\n  }\n  return reactive<T>(storage.value['data'])\n}\n\nexport let useStorage = <T extends object>(key: string, version: number, fallback?: () => T) => {\n  const initial = fallback ? fallback() : {} as T\n  initial['__version__'] = version\n  const storage = useLocalStorage('koishi.console.' + key, initial)\n  if (storage.value['__version__'] !== version) {\n    storage.value = initial\n  }\n  return storage\n}\n\nexport function provideStorage(factory: typeof useStorage) {\n  useStorage = factory\n}\n\nexport type Store = {\n  [K in keyof Console.Services]?: Console.Services[K] extends DataService<infer T> ? T : never\n}\n\ndeclare const KOISHI_CONFIG: ClientConfig\nexport const config = KOISHI_CONFIG\nexport const store = reactive<Store>({})\n\nexport { config as global }\n\nexport const socket = ref<AbstractWebSocket>(null)\nconst listeners: Record<string, (data: any) => void> = {}\nconst responseHooks: Record<string, [Function, Function]> = {}\n\nexport function send<T extends keyof Events>(type: T, ...args: Parameters<Events[T]>): Promisify<ReturnType<Events[T]>>\nexport function send(type: string, ...args: any[]) {\n  if (!socket.value) return\n  const id = Math.random().toString(36).slice(2, 9)\n  socket.value.send(JSON.stringify({ id, type, args }))\n  return new Promise((resolve, reject) => {\n    responseHooks[id] = [resolve, reject]\n    setTimeout(() => {\n      delete responseHooks[id]\n      reject(new Error('timeout'))\n    }, 60000)\n  })\n}\n\nexport function receive<T = any>(event: string, listener: (data: T) => void) {\n  listeners[event] = listener\n}\n\nreceive('data', ({ key, value }) => {\n  store[key] = value\n})\n\nreceive('patch', ({ key, value }) => {\n  if (Array.isArray(store[key])) {\n    store[key].push(...value)\n  } else {\n    Object.assign(store[key], value)\n  }\n})\n\nreceive('response', ({ id, value, error }) => {\n  if (!responseHooks[id]) return\n  const [resolve, reject] = responseHooks[id]\n  delete responseHooks[id]\n  if (error) {\n    reject(error)\n  } else {\n    resolve(value)\n  }\n})\n\nexport function connect(callback: () => AbstractWebSocket) {\n  const value = callback()\n\n  value.addEventListener('message', (ev) => {\n    const data = JSON.parse(ev.data)\n    console.debug('%c', 'color:purple', data.type, data.body)\n    if (data.type in listeners) {\n      listeners[data.type](data.body)\n    }\n  })\n\n  value.addEventListener('close', () => {\n    socket.value = null\n    for (const key in store) {\n      store[key] = undefined\n    }\n    console.log('[koishi] websocket disconnected, will retry in 1s...')\n    setTimeout(() => {\n      connect(callback).then(location.reload, () => {\n        console.log('[koishi] websocket disconnected, will retry in 1s...')\n      })\n    }, 1000)\n  })\n\n  return new Promise<AbstractWebSocket.Event>((resolve, reject) => {\n    value.addEventListener('open', (event) => {\n      socket.value = markRaw(value)\n      resolve(event)\n    })\n    value.addEventListener('error', reject)\n  })\n}\n", "import { defineComponent, h } from 'vue'\nimport { marked } from 'marked'\nimport { escapeAttrValue, filterXSS, parseAttr } from 'xss'\n\n// Sections derived from MDN element categories and limited to the more\n// benign categories.\n// https://developer.mozilla.org/en-US/docs/Web/HTML/Element\nconst allowedTags = [\n  // Content sectioning\n  'address', 'article', 'aside', 'footer', 'header',\n  'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hgroup',\n  'main', 'nav', 'section',\n  // Text content\n  'blockquote', 'dd', 'div', 'dl', 'dt', 'figcaption', 'figure',\n  'hr', 'li', 'main', 'ol', 'p', 'pre', 'ul',\n  // Inline text semantics\n  'a', 'abbr', 'b', 'bdi', 'bdo', 'br', 'cite', 'code', 'data', 'dfn',\n  'em', 'i', 'kbd', 'mark', 'q',\n  'rb', 'rp', 'rt', 'rtc', 'ruby',\n  's', 'samp', 'small', 'span', 'strong', 'sub', 'sup', 'time', 'u', 'var', 'wbr',\n  // Table content\n  'caption', 'col', 'colgroup', 'table', 'tbody', 'td', 'tfoot', 'th',\n  'thead', 'tr',\n]\n\nconst voidTags = ['img', 'br', 'hr', 'area', 'base', 'basefont', 'input', 'link', 'meta']\n\nconst allowedProtocols = ['http:', 'https:', 'mailto:', 'tel:']\n\nfunction checkUrl(value: string) {\n  try {\n    const url = new URL(value, location.toString())\n    return allowedProtocols.includes(url.protocol)\n  } catch (e) {\n    return false\n  }\n}\n\nexport function sanitize(html: string) {\n  const whiteList: XSS.IWhiteList = {\n    ...Object.fromEntries(allowedTags.map(tag => [tag, []])),\n  }\n  const stack: string[] = []\n  html = filterXSS(html, {\n    whiteList,\n    stripIgnoreTag: true,\n    onTag(tag, raw, options) {\n      let html: string | undefined\n      if (tag === 'a' && !options.isClosing) {\n        const attrs: any = {}\n        parseAttr(raw.slice(3), (name, value) => {\n          if (name === 'href') {\n            attrs[name] = checkUrl(value) ? value : '#'\n          } else if (name === 'title') {\n            attrs[name] = escapeAttrValue(value)\n          }\n          return ''\n        })\n        attrs.rel = 'noopener noreferrer'\n        attrs.target = '_blank'\n        html = `<a ${Object.entries(attrs).map(([name, value]) => `${name}=\"${value}\"`).join(' ')}>`\n      }\n      if (raw.endsWith('/>') || voidTags.includes(tag)) return\n      if (!options.isClosing) {\n        stack.push(tag)\n        return html\n      }\n      let result = ''\n      while (stack.length) {\n        const last = stack.pop()\n        if (last === tag) {\n          return result + raw\n        }\n        result += `</${last}>`\n      }\n      return raw.replace(/</g, '&lt;').replace(/>/g, '&gt;')\n    },\n  })\n  while (stack.length) {\n    const last = stack.pop()\n    html += `</${last}>`\n  }\n  return html\n}\n\nexport default defineComponent({\n  props: {\n    source: String,\n    inline: Boolean,\n    tag: String,\n    unsafe: Boolean,\n  },\n  setup(props) {\n    let html = props.inline\n      ? marked.parseInline(props.source || '')\n      : marked.parse(props.source || '')\n    if (!props.unsafe) html = sanitize(html)\n    return () => {\n      const tag = props.tag || (props.inline ? 'span' : 'div')\n      return h(tag, {\n        class: 'markdown',\n        innerHTML: html,\n      })\n    }\n  },\n})\n", "import { App } from 'vue'\nimport Button from './k-button.vue'\nimport Filter from './k-filter.vue'\nimport FilterButton from './k-filter-button.vue'\nimport Form from './k-form.vue'\nimport Tab from './k-tab.vue'\n\nexport default function (app: App) {\n  app.component('k-button', Button)\n  app.component('k-filter', Filter)\n  app.component('k-filter-button', FilterButton)\n  app.component('k-form', Form)\n  app.component('k-tab', Tab)\n}\n", "import { App } from 'vue'\nimport Schema from './schema.vue'\n\nexport * from './icons'\nexport * from './utils'\n\nexport default function (app: App) {\n  app.component('k-schema', Schema)\n}\n", "import IconClose from './close.vue'\nimport IconEllipsis from './ellipsis.vue'\nimport IconExternal from './external.vue'\nimport IconEyeSlash from './eye-slash.vue'\nimport IconEye from './eye.vue'\n\nexport { IconClose, IconEllipsis, IconExternal, IconEyeSlash, IconEye }\n", "export type Dict<T = any, K extends string = string> = { [key in K]: T }\nexport type Get<T extends {}, K> = K extends keyof T ? T[K] : never\nexport type Extract<S, T, U = S> = S extends T ? U : never\nexport type MaybeArray<T> = [T] extends [unknown[]] ? T : T | T[]\nexport type Promisify<T> = Promise<T extends Promise<infer S> ? S : T>\nexport type Awaitable<T> = [T] extends [Promise<unknown>] ? T : T | Promise<T>\nexport type Intersect<U> = (U extends any ? (arg: U) => void : never) extends ((arg: infer I) => void) ? I : never\n\nexport function noop(): any {}\n\nexport function isNullable(value: any): value is null | undefined | void {\n  return value === null || value === undefined\n}\n\nexport function isPlainObject(data: any) {\n  return data && typeof data === 'object' && !Array.isArray(data)\n}\n\nexport function valueMap<T, U>(object: Dict<T>, transform: (value: T, key: string) => U): Dict<U> {\n  return Object.fromEntries(Object.entries(object).map(([key, value]) => [key, transform(value, key)]))\n}\n\nexport function is<K extends keyof typeof globalThis>(type: K, value: any): value is InstanceType<typeof globalThis[K]> {\n  return type in globalThis && value instanceof (globalThis[type] as any)\n    || Object.prototype.toString.call(value).slice(8, -1) === type\n}\n\nexport function clone<T>(source: T): T\nexport function clone(source: any) {\n  if (!source || typeof source !== 'object') return source\n  if (Array.isArray(source)) return source.map(clone)\n  if (is('Date', source)) return new Date(source.valueOf())\n  if (is('RegExp', source)) return new RegExp(source.source, source.flags)\n  return valueMap(source, clone)\n}\n\nexport function deepEqual(a: any, b: any, strict?: boolean): boolean {\n  if (a === b) return true\n  if (!strict && isNullable(a) && isNullable(b)) return true\n  if (typeof a !== typeof b) return false\n  if (typeof a !== 'object') return false\n  if (!a || !b) return false\n\n  // check array\n  if (Array.isArray(a)) {\n    if (!Array.isArray(b) || a.length !== b.length) return false\n    return a.every((item, index) => deepEqual(item, b[index]))\n  } else if (Array.isArray(b)) {\n    return false\n  }\n\n  // check object\n  return Object.keys({ ...a, ...b }).every(key => deepEqual(a[key], b[key]))\n}\n\nexport function pick<T extends object, K extends keyof T>(source: T, keys?: Iterable<K>, forced?: boolean) {\n  if (!keys) return { ...source }\n  const result = {} as Pick<T, K>\n  for (const key of keys) {\n    if (forced || key in source) result[key] = source[key]\n  }\n  return result\n}\n\nexport function omit<T, K extends keyof T>(source: T, keys?: Iterable<K>) {\n  if (!keys) return { ...source }\n  const result = { ...source } as Omit<T, K>\n  for (const key of keys) {\n    Reflect.deleteProperty(result, key)\n  }\n  return result\n}\n\nexport function defineProperty<T, K extends keyof T>(object: T, key: K, value: T[K]): T\nexport function defineProperty<T, K extends keyof any>(object: T, key: K, value: any): T\nexport function defineProperty<T, K extends keyof any>(object: T, key: K, value: any) {\n  return Object.defineProperty(object, key, { writable: true, value })\n}\n", "import { isNullable } from './misc'\n\nexport function contain(array1: readonly any[], array2: readonly any[]) {\n  return array2.every(item => array1.includes(item))\n}\n\nexport function intersection<T>(array1: readonly T[], array2: readonly T[]) {\n  return array1.filter(item => array2.includes(item))\n}\n\nexport function difference<S>(array1: readonly S[], array2: readonly any[]) {\n  return array1.filter(item => !array2.includes(item))\n}\n\nexport function union<T>(array1: readonly T[], array2: readonly T[]) {\n  return Array.from(new Set([...array1, ...array2]))\n}\n\nexport function deduplicate<T>(array: readonly T[]) {\n  return [...new Set(array)]\n}\n\nexport function remove<T>(list: T[], item: T) {\n  const index = list.indexOf(item)\n  if (index >= 0) {\n    list.splice(index, 1)\n    return true\n  } else {\n    return false\n  }\n}\n\nexport function makeArray<T>(source: null | undefined | T | T[]) {\n  return Array.isArray(source) ? source : isNullable(source) ? [] : [source]\n}\n", "export function arrayBufferToBase64(buffer: ArrayBufferLike) {\n  if (typeof Buffer !== 'undefined') {\n    return Buffer.from(buffer).toString('base64')\n  }\n  let binary = ''\n  const bytes = new Uint8Array(buffer)\n  for (let i = 0; i < bytes.byteLength; i++) {\n    binary += String.fromCharCode(bytes[i])\n  }\n  return btoa(binary)\n}\n\nexport function base64ToArrayBuffer(base64: string) {\n  if (typeof Buffer !== 'undefined') {\n    return Buffer.from(base64, 'base64').buffer\n  }\n  const binary = atob(base64.replace(/\\s/g, ''))\n  const buffer = new Uint8Array(binary.length)\n  for (let i = 0; i < binary.length; i++) {\n    buffer[i] = binary.charCodeAt(i)\n  }\n  return buffer\n}\n", "export function capitalize(source: string) {\n  return source.charAt(0).toUpperCase() + source.slice(1)\n}\n\nexport function uncapitalize(source: string) {\n  return source.charAt(0).toLowerCase() + source.slice(1)\n}\n\nexport function camelCase(source: string) {\n  return source.replace(/[_-][a-z]/g, str => str.slice(1).toUpperCase())\n}\n\nexport function paramCase(source: string) {\n  // do not use lookbehind assertion for Safari compatibility\n  return uncapitalize(source)\n    .replace(/_/g, '-')\n    .replace(/.[A-Z]+/g, str => str[0] + '-' + str.slice(1).toLowerCase())\n}\n\nexport function snakeCase(source: string) {\n  // do not use lookbehind assertion for Safari compatibility\n  return uncapitalize(source)\n    .replace(/-/g, '_')\n    .replace(/.[A-Z]+/g, str => str[0] + '_' + str.slice(1).toLowerCase())\n}\n\nexport const camelize = camelCase\nexport const hyphenate = paramCase\n\nnamespace Letter {\n  /* eslint-disable @typescript-eslint/member-delimiter-style */\n  interface LowerToUpper {\n    a: 'A', b: 'B', c: 'C', d: 'D', e: 'E', f: 'F', g: 'G', h: 'H', i: 'I', j: 'J', k: 'K', l: 'L', m: 'M',\n    n: 'N', o: 'O', p: 'P', q: 'Q', r: 'R', s: 'S', t: 'T', u: 'U', v: 'V', w: 'W', x: 'X', y: 'Y', z: 'Z',\n  }\n\n  interface UpperToLower {\n    A: 'a', B: 'b', C: 'c', D: 'd', E: 'e', F: 'f', G: 'g', H: 'h', I: 'i', J: 'j', K: 'k', L: 'l', M: 'm',\n    N: 'n', O: 'o', P: 'p', Q: 'q', R: 'r', S: 's', T: 't', U: 'u', V: 'v', W: 'w', X: 'x', Y: 'y', Z: 'z',\n  }\n  /* eslint-enable @typescript-eslint/member-delimiter-style */\n\n  export type Upper = keyof UpperToLower\n  export type Lower = keyof LowerToUpper\n\n  export type ToUpper<S extends string> = S extends Lower ? LowerToUpper[S] : S\n  export type ToLower<S extends string, P extends string = ''> = S extends Upper ? `${P}${UpperToLower[S]}` : S\n}\n\n/* eslint-disable @typescript-eslint/naming-convention */\nexport type camelize<S extends string> = S extends `${infer L}-${infer M}${infer R}` ? `${L}${Letter.ToUpper<M>}${camelize<R>}` : S\nexport type hyphenate<S extends string> = S extends `${infer L}${infer R}` ? `${Letter.ToLower<L, '-'>}${hyphenate<R>}` : S\n/* eslint-enable @typescript-eslint/naming-convention */\n\nexport function trimSlash(source: string) {\n  return source.replace(/\\/$/, '')\n}\n\nexport function sanitize(source: string) {\n  if (!source.startsWith('/')) source = '/' + source\n  return trimSlash(source)\n}\n", "export namespace Time {\n  export const millisecond = 1\n  export const second = 1000\n  export const minute = second * 60\n  export const hour = minute * 60\n  export const day = hour * 24\n  export const week = day * 7\n\n  let timezoneOffset = new Date().getTimezoneOffset()\n\n  export function setTimezoneOffset(offset: number) {\n    timezoneOffset = offset\n  }\n\n  export function getTimezoneOffset() {\n    return timezoneOffset\n  }\n\n  export function getDateNumber(date: number | Date = new Date(), offset?: number) {\n    if (typeof date === 'number') date = new Date(date)\n    if (offset === undefined) offset = timezoneOffset\n    return Math.floor((date.valueOf() / minute - offset) / 1440)\n  }\n\n  export function fromDateNumber(value: number, offset?: number) {\n    const date = new Date(value * day)\n    if (offset === undefined) offset = timezoneOffset\n    return new Date(+date + offset * minute)\n  }\n\n  const numeric = /\\d+(?:\\.\\d+)?/.source\n  const timeRegExp = new RegExp(`^${[\n    'w(?:eek(?:s)?)?',\n    'd(?:ay(?:s)?)?',\n    'h(?:our(?:s)?)?',\n    'm(?:in(?:ute)?(?:s)?)?',\n    's(?:ec(?:ond)?(?:s)?)?',\n  ].map(unit => `(${numeric}${unit})?`).join('')}$`)\n\n  export function parseTime(source: string) {\n    const capture = timeRegExp.exec(source)\n    if (!capture) return 0\n    return (parseFloat(capture[1]) * week || 0)\n      + (parseFloat(capture[2]) * day || 0)\n      + (parseFloat(capture[3]) * hour || 0)\n      + (parseFloat(capture[4]) * minute || 0)\n      + (parseFloat(capture[5]) * second || 0)\n  }\n\n  export function parseDate(date: string) {\n    const parsed = parseTime(date)\n    if (parsed) {\n      date = Date.now() + parsed as any\n    } else if (/^\\d{1,2}(:\\d{1,2}){1,2}$/.test(date)) {\n      date = `${new Date().toLocaleDateString()}-${date}`\n    } else if (/^\\d{1,2}-\\d{1,2}-\\d{1,2}(:\\d{1,2}){1,2}$/.test(date)) {\n      date = `${new Date().getFullYear()}-${date}`\n    }\n    return date ? new Date(date) : new Date()\n  }\n\n  export function format(ms: number) {\n    const abs = Math.abs(ms)\n    if (abs >= day - hour / 2) {\n      return Math.round(ms / day) + 'd'\n    } else if (abs >= hour - minute / 2) {\n      return Math.round(ms / hour) + 'h'\n    } else if (abs >= minute - second / 2) {\n      return Math.round(ms / minute) + 'm'\n    } else if (abs >= second) {\n      return Math.round(ms / second) + 's'\n    }\n    return ms + 'ms'\n  }\n\n  export function toDigits(source: number, length = 2) {\n    return source.toString().padStart(length, '0')\n  }\n\n  export function template(template: string, time = new Date()) {\n    return template\n      .replace('yyyy', time.getFullYear().toString())\n      .replace('yy', time.getFullYear().toString().slice(2))\n      .replace('MM', toDigits(time.getMonth() + 1))\n      .replace('dd', toDigits(time.getDate()))\n      .replace('hh', toDigits(time.getHours()))\n      .replace('mm', toDigits(time.getMinutes()))\n      .replace('ss', toDigits(time.getSeconds()))\n      .replace('SSS', toDigits(time.getMilliseconds(), 3))\n  }\n}\n", "import { clone, deepEqual, Dict, isNullable, isPlainObject, pick, valueMap } from 'cosmokit'\n\nconst kSchema = Symbol.for('schemastery')\n\ndeclare global {\n  namespace Schemastery {\n    export type From<X> =\n      | X extends string | number | boolean ? Schema<X>\n      : X extends Schema ? X\n      : X extends typeof String ? Schema<string>\n      : X extends typeof Number ? Schema<number>\n      : X extends typeof Boolean ? Schema<boolean>\n      : X extends typeof Function ? Schema<Function, (...args: any[]) => any>\n      : X extends Constructor<infer S> ? Schema<S>\n      : never\n\n    type _TypeS<X> = X extends Schema<infer S, unknown> ? S : never\n    type Inverse<X> = X extends Schema<any, infer Y> ? (arg: Y) => void : never\n\n    export type TypeS<X> = _TypeS<From<X>>\n    export type TypeT<X> = ReturnType<From<X>>\n    export type Resolve = (data: any, schema: Schema, strict?: boolean) => [any, any?]\n\n    export type IntersectS<X> = From<X> extends Schema<infer S, unknown> ? S : never\n    export type IntersectT<X> = Inverse<From<X>> extends ((arg: infer T) => void) ? T : never\n\n    type TupleS<X extends readonly any[]> = X extends readonly [infer L, ...infer R] ? [TypeS<L>?, ...TupleS<R>] : any[]\n    type TupleT<X extends readonly any[]> = X extends readonly [infer L, ...infer R] ? [TypeT<L>?, ...TupleT<R>] : any[]\n    type ObjectS<X extends Dict> = { [K in keyof X]?: TypeS<X[K]> } & Dict\n    type ObjectT<X extends Dict> = { [K in keyof X]: TypeT<X[K]> } & Dict\n    type Constructor<T = any> = new (...args: any[]) => T\n\n    export interface Static {\n      <T = any>(options: Partial<Schema.Base<T>>): Schema<T>\n      new <T = any>(options: Partial<Schema.Base<T>>): Schema<T>\n      prototype: Schema\n      resolve: Resolve\n      from<X = any>(source?: X): From<X>\n      extend(type: string, resolve: Resolve): void\n      any(): Schema<any>\n      never(): Schema<never>\n      const<T>(value: T): Schema<T>\n      string(): Schema<string>\n      number(): Schema<number>\n      natural(): Schema<number>\n      percent(): Schema<number>\n      boolean(): Schema<boolean>\n      date(): Schema<string | Date, Date>\n      bitset<K extends string>(bits: Partial<Record<K, number>>): Schema<number | readonly K[], number>\n      function(): Schema<Function, (...args: any[]) => any>\n      is<T>(constructor: Constructor<T>): Schema<T>\n      array<X>(inner: X): Schema<TypeS<X>[], TypeT<X>[]>\n      dict<X, Y extends Schema<any, string> = Schema<string>>(inner: X, sKey?: Y): Schema<Dict<TypeS<X>, TypeS<Y>>, Dict<TypeT<X>, TypeT<Y>>>\n      tuple<X extends readonly any[]>(list: X): Schema<TupleS<X>, TupleT<X>>\n      object<X extends Dict>(dict: X): Schema<ObjectS<X>, ObjectT<X>>\n      union<X>(list: readonly X[]): Schema<TypeS<X>, TypeT<X>>\n      intersect<X>(list: readonly X[]): Schema<IntersectS<X>, IntersectT<X>>\n      transform<X, T>(inner: X, callback: (value: TypeS<X>) => T, preserve?: boolean): Schema<TypeS<X>, T>\n    }\n  }\n}\n\nnamespace Schema {\n  export interface Base<T = any> {\n    uid: number\n    meta: Meta<T>\n    type: string\n    sKey?: Schema\n    inner?: Schema\n    list?: Schema[]\n    dict?: Dict<Schema>\n    bits?: Dict<number>\n    callback?: Function\n    value?: T\n    refs?: Dict<Schema>\n    preserve?: boolean\n    toString(inline?: boolean): string\n  }\n\n  export interface Meta<T = any> {\n    default?: T extends {} ? Partial<T> : T\n    required?: boolean\n    hidden?: boolean\n    role?: string\n    extra?: any\n    link?: string\n    description?: string\n    comment?: string\n    pattern?: { source: string, flags?: string }\n    max?: number\n    min?: number\n    step?: number\n  }\n}\n\ndeclare module globalThis {\n  export let __schemastery_index__: number\n}\n\nglobalThis.__schemastery_index__ ??= 0\n\nconst Schema = function (options: Schema.Base) {\n  const schema = function (data: any) {\n    return Schema.resolve(data, schema)[0]\n  } as Schema\n\n  if (options.refs) {\n    const refs = valueMap(options.refs, options => new Schema(options))\n    const getRef = (uid: any) => refs[uid]!\n    for (const key in refs) {\n      const options = refs[key]!\n      options.sKey = getRef(options.sKey)\n      options.inner = getRef(options.inner)\n      options.list = options.list && options.list.map(getRef)\n      options.dict = options.dict && valueMap(options.dict, getRef)\n    }\n    return refs[options.uid!]\n  }\n\n  Object.assign(schema, options)\n  Object.defineProperty(schema, 'uid', { value: globalThis.__schemastery_index__++ })\n  Object.setPrototypeOf(schema, Schema.prototype)\n  schema.meta ||= {}\n  schema.toString = schema.toString.bind(schema)\n  return schema\n} as Schemastery.Static\n\ninterface Schema<S = any, T = S> extends Schema.Base<T> {\n  (data?: S | null): T\n  new (data?: S | null): T\n  [kSchema]: true\n  toJSON(): Schema.Base<T>\n  required(value?: boolean): Schema<S, T>\n  hidden(value?: boolean): Schema<S, T>\n  role(text: string, extra?: any): Schema<S, T>\n  link(link: string): Schema<S, T>\n  default(value: T): Schema<S, T>\n  comment(text: string): Schema<S, T>\n  description(text: string): Schema<S, T>\n  pattern(regexp: RegExp): Schema<S, T>\n  max(value: number): Schema<S, T>\n  min(value: number): Schema<S, T>\n  step(value: number): Schema<S, T>\n  set(key: string, value: Schema): Schema<S, T>\n  push(value: Schema): Schema<S, T>\n  simplify(value?: any): any\n}\n\nSchema.prototype = Object.create(Function.prototype)\n\nSchema.prototype[kSchema] = true\n\nlet refs: Record<number, Schema> | undefined\n\nSchema.prototype.toJSON = function toJSON() {\n  if (refs) {\n    refs[this.uid] ??= JSON.parse(JSON.stringify({ ...this }))\n    return this.uid as any\n  }\n\n  refs = { [this.uid]: { ...this } as Schema }\n  refs[this.uid] = JSON.parse(JSON.stringify({ ...this }))\n  const result = { uid: this.uid, refs }\n  refs = undefined\n  return result\n}\n\nSchema.prototype.set = function set(key, value) {\n  this.dict![key] = value\n  return this\n}\n\nSchema.prototype.push = function push(value) {\n  this.list!.push(value)\n  return this\n}\n\nfor (const key of ['required', 'hidden']) {\n  Object.assign(Schema.prototype, {\n    [key](this: Schema, value = true) {\n      const schema = Schema(this)\n      schema.meta = { ...schema.meta, [key]: value }\n      return schema\n    },\n  })\n}\n\nSchema.prototype.pattern = function pattern(regexp) {\n  const schema = Schema(this)\n  const pattern = pick(regexp, ['source', 'flags'])\n  schema.meta = { ...schema.meta, pattern }\n  return schema\n}\n\nSchema.prototype.simplify = function simplify(this: Schema, value) {\n  if (deepEqual(value, this.meta.default)) return null\n  if (isNullable(value)) return value\n  if (this.type === 'object' || this.type === 'dict') {\n    const result: Dict = {}\n    for (const key in value) {\n      const schema = this.type === 'object' ? this.dict![key] : this.inner\n      const item = schema?.simplify(value[key])\n      if (!isNullable(item)) result[key] = item\n    }\n    return result\n  } else if (this.type === 'array' || this.type === 'tuple') {\n    const result: any[] = []\n    for (const key of value) {\n      const schema = this.type === 'array' ? this.inner : this.list![key]\n      const item = schema ? schema.simplify(value[key]) : value[key]\n      result.push(item)\n    }\n    return result\n  } else if (this.type === 'intersect') {\n    const result: Dict = {}\n    for (const item of this.list!) {\n      Object.assign(result, item.simplify(value))\n    }\n    return result\n  } else if (this.type === 'union') {\n    for (const schema of this.list!) {\n      try {\n        Schema.resolve(value, schema)\n        return schema.simplify(value)\n      } catch {}\n    }\n  }\n  return value\n}\n\nSchema.prototype.toString = function toString(this: Schema, inline?: boolean) {\n  return formatters[this.type]?.(this, inline) ?? `Schema<${this.type}>`\n}\n\nSchema.prototype.role = function role(role, extra) {\n  const schema = Schema(this)\n  schema.meta = { ...schema.meta, role, extra }\n  return schema\n}\n\nfor (const key of ['default', 'link', 'comment', 'description', 'max', 'min', 'step']) {\n  Object.assign(Schema.prototype, {\n    [key](this: Schema, value: any) {\n      const schema = Schema(this)\n      schema.meta = { ...schema.meta, [key]: value }\n      return schema\n    },\n  })\n}\n\nconst resolvers: Dict<Schemastery.Resolve> = {}\n\nSchema.extend = function extend(type: string, resolve) {\n  resolvers[type] = resolve\n}\n\nSchema.resolve = function resolve(data, schema, strict) {\n  if (!schema) return [data]\n\n  if (isNullable(data)) {\n    if (schema.meta.required) throw new TypeError(`missing required value`)\n    let current = schema\n    let fallback = schema.meta.default\n    while (current?.type === 'intersect' && isNullable(fallback)) {\n      current = current.list![0]\n      fallback = current?.meta.default\n    }\n    if (isNullable(fallback)) return [data]\n    data = clone(fallback)\n  }\n\n  const callback = resolvers[schema.type]\n  if (callback) return callback(data, schema, strict)\n  throw new TypeError(`unsupported type \"${schema.type}\"`)\n}\n\nSchema.from = function from(source: any) {\n  if (isNullable(source)) {\n    return Schema.any()\n  } else if (['string', 'number', 'boolean'].includes(typeof source)) {\n    return Schema.const(source).required()\n  } else if (source[kSchema]) {\n    return source\n  } else if (typeof source === 'function') {\n    switch (source) {\n      case String: return Schema.string().required()\n      case Number: return Schema.number().required()\n      case Boolean: return Schema.boolean().required()\n      case Function: return Schema.function().required()\n      default: return Schema.is(source).required()\n    }\n  } else {\n    throw new TypeError(`cannot infer schema from ${source}`)\n  }\n}\n\nSchema.natural = function natural() {\n  return Schema.number().step(1).min(0)\n}\n\nSchema.percent = function percent() {\n  return Schema.number().step(0.01).min(0).max(1).role('slider')\n}\n\nSchema.date = function date() {\n  return Schema.union([\n    Schema.is(Date),\n    Schema.transform(Schema.string().role('datetime'), (value) => {\n      const date = new Date(value)\n      if (isNaN(+date)) throw new TypeError(`invalid date \"${value}\"`)\n      return date\n    }, true),\n  ])\n}\n\nSchema.extend('any', (data) => {\n  return [data]\n})\n\nSchema.extend('never', (data) => {\n  throw new TypeError(`expected nullable but got ${data}`)\n})\n\nSchema.extend('const', (data, { value }) => {\n  if (data === value) return [value]\n  throw new TypeError(`expected ${value} but got ${data}`)\n})\n\nfunction checkWithinRange(data: number, meta: Schema.Meta<any>, description: string) {\n  const { max = Infinity, min = -Infinity } = meta\n  if (data > max) throw new TypeError(`expected ${description} <= ${max} but got ${data}`)\n  if (data < min) throw new TypeError(`expected ${description} >= ${min} but got ${data}`)\n}\n\nSchema.extend('string', (data, { meta }) => {\n  if (typeof data !== 'string') throw new TypeError(`expected string but got ${data}`)\n  if (meta.pattern) {\n    const regexp = new RegExp(meta.pattern.source, meta.pattern.flags)\n    if (!regexp.test(data)) throw new TypeError(`expect string to match regexp ${regexp}`)\n  }\n  checkWithinRange(data.length, meta, 'string length')\n  return [data]\n})\n\nSchema.extend('number', (data, { meta }) => {\n  if (typeof data !== 'number') throw new TypeError(`expected number but got ${data}`)\n  checkWithinRange(data, meta, 'number')\n  const { step } = meta\n  if (step) {\n    const quotient = Math.abs(data - (meta.min ?? 0)) % step\n    if (quotient >= Number.EPSILON && quotient < step - Number.EPSILON) {\n      throw new TypeError(`expected number multiple of ${step} but got ${data}`)\n    }\n  }\n  return [data]\n})\n\nSchema.extend('boolean', (data) => {\n  if (typeof data === 'boolean') return [data]\n  throw new TypeError(`expected boolean but got ${data}`)\n})\n\nSchema.extend('bitset', (data, { bits }) => {\n  if (typeof data === 'number') return [data]\n  if (!Array.isArray(data)) throw new TypeError(`expected array but got ${data}`)\n  let result = 0\n  for (const value of data) {\n    if (typeof value !== 'string') throw new TypeError(`expected string but got ${value}`)\n    if (!(value in bits!)) throw new TypeError(`unknown value ${value}`)\n    result |= bits![value]!\n  }\n  return [result, result]\n})\n\nSchema.extend('function', (data) => {\n  if (typeof data === 'function') return [data]\n  throw new TypeError(`expected function but got ${data}`)\n})\n\nSchema.extend('is', (data, { callback }) => {\n  if (data instanceof callback!) return [data]\n  throw new TypeError(`expected ${callback!.name} but got ${data}`)\n})\n\nfunction property(data: any, key: keyof any, schema: Schema) {\n  const [value, adapted] = Schema.resolve(data[key], schema)\n  if (!isNullable(adapted)) data[key] = adapted\n  return value\n}\n\nSchema.extend('array', (data, { inner, meta }) => {\n  if (!Array.isArray(data)) throw new TypeError(`expected array but got ${data}`)\n  checkWithinRange(data.length, meta, 'array length')\n  return [data.map((_, index) => property(data, index, inner!))]\n})\n\nSchema.extend('dict', (data, { inner, sKey }, strict) => {\n  if (!isPlainObject(data)) throw new TypeError(`expected object but got ${data}`)\n  const result: any = {}\n  for (const key in data) {\n    let rKey: string\n    try {\n      rKey = Schema.resolve(key, sKey!)[0]\n    } catch (error) {\n      if (strict) continue\n      throw error\n    }\n    result[rKey] = property(data, key, inner!)\n    data[rKey] = data[key]\n    if (key !== rKey) delete data[key]\n  }\n  return [result]\n})\n\nSchema.extend('tuple', (data, { list }, strict) => {\n  if (!Array.isArray(data)) throw new TypeError(`expected array but got ${data}`)\n  const result = list!.map((inner, index) => property(data, index, inner))\n  if (strict) return [result]\n  result.push(...data.slice(list!.length))\n  return [result]\n})\n\nfunction merge(result: any, data: any) {\n  for (const key in data) {\n    if (key in result) continue\n    result[key] = data[key]\n  }\n}\n\nSchema.extend('object', (data, { dict }, strict) => {\n  if (!isPlainObject(data)) throw new TypeError(`expected object but got ${data}`)\n  const result: any = {}\n  for (const key in dict) {\n    const value = property(data, key, dict![key]!)\n    if (!isNullable(value) || key in data) {\n      result[key] = value\n    }\n  }\n  if (!strict) merge(result, data)\n  return [result]\n})\n\nSchema.extend('union', (data, { list, toString }) => {\n  const messages: string[] = []\n  for (const inner of list!) {\n    try {\n      return Schema.resolve(data, inner)\n    } catch (error) {\n      // messages.push(error.message)\n    }\n  }\n  throw new TypeError(`expected ${toString()} but got ${JSON.stringify(data)}`)\n})\n\nSchema.extend('intersect', (data, { list, toString }, strict) => {\n  let result\n  for (const inner of list!) {\n    const value: any = Schema.resolve(data, inner, true)[0]\n    if (isNullable(value)) continue\n    if (isNullable(result)) {\n      result = value\n    } else if (typeof result !== typeof value) {\n      throw new TypeError(`expected ${toString()} but got ${JSON.stringify(data)}`)\n    } else if (typeof value === 'object') {\n      result = { ...result as any, ...value }\n    } else if (result !== value) {\n      throw new TypeError(`expected ${toString()} but got ${JSON.stringify(data)}`)\n    }\n  }\n  if (!strict && isPlainObject(data)) merge(result, data)\n  return [result]\n})\n\nSchema.extend('transform', (data, { inner, callback, preserve }) => {\n  const [result, adapted = data] = Schema.resolve(data, inner!, true)\n  if (isPlainObject(data)) {\n    const temp: any = {}\n    for (const key in result) {\n      if (!(key in data)) continue\n      temp[key] = data[key]\n      delete data[key]\n    }\n    Object.assign(data, callback!(temp))\n    return [callback!(result)]\n  } else if (preserve) {\n    return [callback!(result)]\n  } else {\n    return [callback!(result), callback!(adapted)]\n  }\n})\n\ntype Formatter = (schema: Schema, inline?: boolean) => string\nconst formatters: Dict<Formatter> = {}\n\nfunction defineMethod(name: string, keys: (keyof Schema.Base)[], format: Formatter) {\n  formatters[name] = format\n  Object.assign(Schema, {\n    [name](...args: any[]) {\n      const schema = new Schema({ type: name } as Schema.Base)\n      keys.forEach((key, index) => {\n        switch (key) {\n          case 'sKey': schema.sKey = args[index] ?? Schema.string(); break\n          case 'inner': schema.inner = Schema.from(args[index]); break\n          case 'list': schema.list = args[index].map(Schema.from); break\n          case 'dict': schema.dict = valueMap(args[index], Schema.from); break\n          case 'bits': {\n            schema.bits = {}\n            for (const key in args[index]) {\n              if (typeof args[index][key] !== 'number') continue\n              schema.bits[key] = args[index][key]\n            }\n            break\n          }\n          default: schema[key] = args[index] as never\n        }\n      })\n      if (name === 'object' || name === 'dict') {\n        schema.meta.default = {}\n      } else if (name === 'array' || name === 'tuple') {\n        schema.meta.default = []\n      } else if (name === 'bitset') {\n        schema.meta.default = 0\n      }\n      return schema\n    },\n  })\n}\n\ndefineMethod('is', ['callback'], ({ callback }) => callback!.name)\ndefineMethod('any', [], () => 'any')\ndefineMethod('never', [], () => 'never')\ndefineMethod('const', ['value'], ({ value }) => typeof value === 'string' ? JSON.stringify(value) : value)\ndefineMethod('string', [], () => 'string')\ndefineMethod('number', [], () => 'number')\ndefineMethod('boolean', [], () => 'boolean')\ndefineMethod('bitset', ['bits'], () => 'bitset')\ndefineMethod('function', [], () => 'function')\ndefineMethod('array', ['inner'], ({ inner }) => `${inner!.toString(true)}[]`)\ndefineMethod('dict', ['inner', 'sKey'], ({ inner, sKey }) => `{ [key: ${sKey!.toString()}]: ${inner!.toString()} }`)\ndefineMethod('tuple', ['list'], ({ list }) => `[${list!.map((inner) => inner.toString()).join(', ')}]`)\n\ndefineMethod('object', ['dict'], ({ dict }) => {\n  if (Object.keys(dict!).length === 0) return '{}'\n  return `{ ${Object.entries(dict!).map(([key, inner]) => {\n    return `${key}${inner!.meta.required ? '' : '?'}: ${inner!.toString()}`\n  }).join(', ')} }`\n})\n\ndefineMethod('union', ['list'], ({ list }, inline) => {\n  const result = list!.map(({ toString: format }) => format()).join(' | ')\n  return inline ? `(${result})` : result\n})\n\ndefineMethod('intersect', ['list'], ({ list }) => {\n  return `${list!.map((inner) => inner.toString(true)).join(' & ')}`\n})\n\ndefineMethod('transform', ['inner', 'callback', 'preserve'], ({ inner }, isInner) => inner!.toString(isInner))\n\nexport = Schema\n", "import Schema from 'schemastery'\nimport { clone } from 'cosmokit'\n\nexport * from 'cosmokit'\nexport { Schema }\n\nconst primitive = ['string', 'number', 'boolean', 'bitset', 'const']\nconst dynamic = ['function', 'transform', 'is']\nconst composite = ['array', 'dict']\n\nexport function isObjectSchema(schema: Schema): boolean {\n  if (schema.type === 'object') {\n    return true\n  } else if (schema.type === 'intersect') {\n    return schema.list.every(isObjectSchema)\n  } else if (schema.type === 'union') {\n    return getChoices(schema).every(isObjectSchema)\n  } else {\n    return false\n  }\n}\n\nexport function getChoices(schema: Schema) {\n  const inner: Schema[] = []\n  const choices = schema.list.filter((item) => {\n    if (item.meta.hidden) return\n    if (item.type === 'transform') inner.push(item.inner)\n    return !dynamic.includes(item.type)\n  })\n  return choices.length ? choices : inner\n}\n\nexport function getFallback(schema: Schema, required = false) {\n  if (!schema || schema.type === 'union' && getChoices(schema).length === 1) return\n  return clone(schema.meta.default) ?? (required ? inferFallback(schema) : undefined)\n}\n\nexport function inferFallback(schema: Schema) {\n  if (schema.type === 'string') return ''\n  if (schema.type === 'number') return 0\n  if (schema.type === 'boolean') return false\n  if (['dict', 'object', 'intersect'].includes(schema.type)) return {}\n}\n\nexport function validate(schema: Schema): boolean {\n  if (!schema || schema.meta.hidden) return true\n  if (schema.type === 'object') {\n    return Object.values(schema.dict).every(validate)\n  } else if (schema.type === 'intersect') {\n    return schema.list.every(isObjectSchema)\n  } else if (schema.type === 'union') {\n    const choices = getChoices(schema)\n    return choices.length === 1 || choices.every(item => validate(item))\n  } else if (composite.includes(schema.type)) {\n    return validate(schema.inner)\n  } else if (schema.type === 'tuple') {\n    return schema.list.every(item => primitive.includes(item.type))\n  } else if (schema.type === 'any') {\n    return ['filter'].includes(schema.meta.role)\n  } else {\n    return primitive.includes(schema.type)\n  }\n}\n\nexport function hasTitle(schema: Schema, root?: boolean): boolean {\n  if (!schema) return true\n  if (schema.type === 'object') {\n    if (schema.meta.description) return true\n    const keys = Object.keys(schema.dict)\n    if (!keys.length) return true\n    return hasTitle(schema.dict[keys[0]])\n  } else if (schema.type === 'intersect') {\n    return hasTitle(schema.list[0])\n  } else if (schema.type === 'union') {\n    const choices = getChoices(schema)\n    return choices.length === 1 ? hasTitle(choices[0]) : false\n  } else if (root && composite.includes(schema.type) && validate(schema.inner)) {\n    return true\n  } else {\n    return false\n  }\n}\n", "import { App } from 'vue'\nimport Markdown from 'marked-vue'\nimport Element, { ElLoading, ElMessage, ElMessageBox } from 'element-plus'\n\nimport common from './common'\nimport form from 'schemastery-vue'\nimport ChatImage from './chat/image.vue'\nimport * as icons from './icons'\nimport layout from './layout'\nimport notice from './notice'\nimport Slot from './slot'\n\nimport 'element-plus/dist/index.css'\n\nexport const loading = ElLoading.service\nexport const message = ElMessage\nexport const messageBox = ElMessageBox\n\nexport * from './common'\nexport * from './layout'\nexport * from './notice'\n\nexport * from 'schemastery-vue'\nexport * from '@satorijs/components'\n\nexport { icons, ChatImage }\n\nexport default function (app: App) {\n  app.use(Element)\n  app.component('k-markdown', Markdown)\n\n  app.use(common)\n  app.use(form)\n  app.use(icons)\n  app.use(layout)\n  app.use(notice)\n\n  app.component('k-slot', Slot)\n}\n", "import { App, Component, defineComponent, h } from 'vue'\nimport { IconExternal, IconEye, IconEyeSlash } from 'schemastery-vue'\nimport Default from './activity/default.vue'\nimport Ellipsis from './activity/ellipsis.vue'\nimport Home from './activity/home.vue'\nimport Moon from './activity/moon.vue'\nimport Sun from './activity/sun.vue'\nimport BoxOpen from './svg/box-open.vue'\nimport CheckFull from './svg/check-full.vue'\nimport ChevronDown from './svg/chevron-down.vue'\nimport ChevronLeft from './svg/chevron-left.vue'\nimport ChevronRight from './svg/chevron-right.vue'\nimport ChevronUp from './svg/chevron-up.vue'\nimport ClipboardList from './svg/clipboard-list.vue'\nimport Delete from './svg/delete.vue'\nimport Edit from './svg/edit.vue'\nimport ExclamationFull from './svg/exclamation-full.vue'\nimport Expand from './svg/expand.vue'\nimport FileArchive from './svg/file-archive.vue'\nimport Filter from './svg/filter.vue'\nimport GitHub from './svg/github.vue'\nimport GitLab from './svg/gitlab.vue'\nimport InfoFull from './svg/info-full.vue'\nimport Koishi from './svg/koishi.vue'\nimport Link from './svg/link.vue'\nimport PaperPlane from './svg/paper-plane.vue'\nimport QuestionEmpty from './svg/question-empty.vue'\nimport Redo from './svg/redo.vue'\nimport Search from './svg/search.vue'\nimport SearchMinus from './svg/search-minus.vue'\nimport SearchPlus from './svg/search-plus.vue'\nimport StarEmpty from './svg/star-empty.vue'\nimport StarFull from './svg/star-full.vue'\nimport Start from './svg/start.vue'\nimport Tag from './svg/tag.vue'\nimport TimesFull from './svg/times-full.vue'\nimport Tools from './svg/tools.vue'\nimport Undo from './svg/undo.vue'\nimport User from './svg/user.vue'\n\nimport './style.scss'\n\nconst registry: Record<string, Component> = {}\n\nregister('activity:default', Default)\nregister('activity:ellipsis', Ellipsis)\nregister('activity:home', Home)\nregister('activity:moon', Moon)\nregister('activity:sun', Sun)\n\nregister('box-open', BoxOpen)\nregister('check-full', CheckFull)\nregister('chevron-down', ChevronDown)\nregister('chevron-left', ChevronLeft)\nregister('chevron-right', ChevronRight)\nregister('chevron-up', ChevronUp)\nregister('clipboard-list', ClipboardList)\nregister('delete', Delete)\nregister('edit', Edit)\nregister('exclamation-full', ExclamationFull)\nregister('expand', Expand)\nregister('external', IconExternal)\nregister('eye-slash', IconEyeSlash)\nregister('eye', IconEye)\nregister('file-archive', FileArchive)\nregister('filter', Filter)\nregister('github', GitHub)\nregister('gitlab', GitLab)\nregister('info-full', InfoFull)\nregister('koishi', Koishi)\nregister('link', Link)\nregister('paper-plane', PaperPlane)\nregister('question-empty', QuestionEmpty)\nregister('redo', Redo)\nregister('search', Search)\nregister('search-minus', SearchMinus)\nregister('search-plus', SearchPlus)\nregister('star-empty', StarEmpty)\nregister('star-full', StarFull)\nregister('start', Start)\nregister('tag', Tag)\nregister('times-full', TimesFull)\nregister('tools', Tools)\nregister('undo', Undo)\nregister('user', User)\n\nexport function register(name: string, component: Component) {\n  registry[name] = component\n}\n\nexport function install(app: App) {\n  app.component('k-icon', defineComponent({\n    props: {\n      name: String,\n    },\n    render(props) {\n      return props.name && h(registry[props.name])\n    },\n  }))\n}\n", "import { App } from 'vue'\nimport Layout from './k-layout.vue'\nimport Status from './k-status.vue'\nimport CardNumeric from './card-numeric.vue'\nimport Card from './card.vue'\nimport Content from './content.vue'\nimport Empty from './empty.vue'\nimport TabGroup from './tab-group.vue'\nimport TabItem from './tab-item.vue'\n\nexport * from './utils'\n\nexport default function (app: App) {\n  app.component('k-layout', Layout)\n  app.component('k-status', Status)\n  app.component('k-numeric', CardNumeric)\n  app.component('k-card', Card)\n  app.component('k-content', Content)\n  app.component('k-empty', Empty)\n  app.component('k-tab-group', TabGroup)\n  app.component('k-tab-item', TabItem)\n}\n", "import { ref } from 'vue'\n\nexport const isLeftAsideOpen = ref(false)\n", "import { App } from 'vue'\nimport Badge from './badge.vue'\nimport Comment from './comment.vue'\nimport Hint from './hint.vue'\n\nexport default function (app: App) {\n  app.component('k-badge', Badge)\n  app.component('k-comment', Comment)\n  app.component('k-hint', Hint)\n}\n", "import { views } from '..'\nimport { defineComponent, h } from 'vue'\n\nexport default defineComponent({\n  props: {\n    name: String,\n    data: Object,\n    tag: {\n      default: 'div',\n    },\n  },\n  setup: (props, { slots }) => () => {\n    return h(props.tag, [\n      ...slots.default?.() || [],\n      ...(views[props.name] || []).map(view => h(view.component, { data: props.data })),\n    ])\n  },\n})\n", "import ChatInput from './input.vue'\nimport MessageContent from './content.vue'\n\nexport { ChatInput, MessageContent }\n", "import Dropdown from './dropdown.vue'\nimport Popper from './popper.vue'\nimport Tooltip from './tooltip.vue'\n\nexport * from './shared'\n\nexport { Dropdown, Popper, Tooltip }\n", "import { InjectionKey } from 'vue'\nimport { Placement } from '@popperjs/core'\n\nexport namespace injections {\n  export const placement: InjectionKey<Placement> = Symbol('INJECTION_PLACEMENT')\n  export const teleport: InjectionKey<string> = Symbol('INJECTION_TELEPORT')\n}\n", "import { Comment, defineComponent, Directive, Fragment, h, Ref, ref, Text, VNode, watch, withDirectives } from 'vue'\n\nexport const useRefDirective = (ref: Ref): Directive<Element> => ({\n  mounted(el) {\n    ref.value = el\n  },\n  updated(el) {\n    ref.value = el\n  },\n  beforeUnmount() {\n    ref.value = null\n  },\n})\n\nfunction findFirstLegitChild(node: VNode[]): VNode {\n  if (!node) return null\n  for (const child of node) {\n    if (typeof child === 'object') {\n      switch (child.type) {\n        case Comment:\n          continue\n        case Text:\n          break\n        case Fragment:\n          return findFirstLegitChild(child.children as VNode[])\n        default:\n          if (typeof child.type === 'string') return child\n          return child\n      }\n    }\n    return h('span', child)\n  }\n}\n\nconst VirtualItem = defineComponent({\n  props: {\n    class: {},\n  },\n\n  emits: ['resize'],\n\n  setup(props, { attrs, slots, emit }) {\n    let resizeObserver: ResizeObserver\n    const root = ref<HTMLElement>()\n\n    watch(root, (value) => {\n      resizeObserver?.disconnect()\n      if (!value) return\n\n      resizeObserver = new ResizeObserver(dispatchSizeChange)\n      resizeObserver.observe(value)\n    })\n\n    function dispatchSizeChange() {\n      if (!root.value) return\n      const marginTop = +(getComputedStyle(root.value).marginTop.slice(0, -2))\n      emit('resize', root.value.offsetHeight + marginTop)\n    }\n\n    const directive = useRefDirective(root)\n\n    return () => {\n      const head = findFirstLegitChild(slots.default?.(attrs))\n      return withDirectives(head, [[directive]])\n    }\n  },\n})\n\nexport default VirtualItem\n", "import VirtualItem from './item'\nimport VirtualList from './list.vue'\n\nexport { VirtualItem, VirtualList }\n", "import { Console } from '@koishijs/plugin-console'\nimport { defineComponent, h, resolveComponent } from 'vue'\nimport { createRouter, createWebHistory, START_LOCATION } from 'vue-router'\nimport { config, Store, store } from './data'\nimport install, { isNullable } from './components'\nimport Overlay from './components/chat/overlay.vue'\nimport { initTask } from './loader'\nimport { Context } from './context'\n\nimport './styles/index.scss'\n\nexport * from './activity'\nexport * from './components'\nexport * from './context'\nexport * from './loader'\nexport * from './data'\n\nexport default install\n\nexport const router = createRouter({\n  history: createWebHistory(config.uiPath),\n  linkActiveClass: 'active',\n  routes: [],\n})\n\nexport const root = new Context()\n\nroot.slot({\n  type: 'global',\n  component: Overlay,\n})\n\nroot.on('activity', data => !data)\n\nrouter.beforeEach(async (to, from) => {\n  if (to.matched.length) return\n\n  if (from === START_LOCATION) {\n    await initTask\n    to = router.resolve(to)\n    if (to.matched.length) return to\n  }\n\n  return {\n    path: '/',\n    query: { redirect: to.fullPath },\n  }\n})\n\n// component helper\n\nexport type Field = keyof Console.Services\n\nexport namespace Card {\n  export function create(render: Function, fields: readonly Field[] = []) {\n    return defineComponent({\n      render: () => fields.every(key => store[key]) ? render() : null,\n    })\n  }\n\n  export interface NumericOptions {\n    icon: string\n    title: string\n    type?: string\n    fields?: Field[]\n    content: (store: Store) => any\n  }\n\n  export function numeric({ type, icon, fields, title, content }: NumericOptions) {\n    if (!type) {\n      return defineComponent(() => () => {\n        if (!fields.every(key => store[key])) return\n        return h(resolveComponent('k-numeric'), { icon, title }, () => content(store))\n      })\n    }\n\n    return defineComponent(() => () => {\n      if (!fields.every(key => store[key])) return\n      let value = content(store)\n      if (isNullable(value)) return\n      if (type === 'size') {\n        if (value >= (1 << 20) * 1000) {\n          value = (value / (1 << 30)).toFixed(1) + ' GB'\n        } else if (value >= (1 << 10) * 1000) {\n          value = (value / (1 << 20)).toFixed(1) + ' MB'\n        } else {\n          value = (value / (1 << 10)).toFixed(1) + ' KB'\n        }\n      }\n      return h(resolveComponent('k-numeric'), { icon, title }, () => [value])\n    })\n  }\n}\n", "import { ref, watch } from 'vue'\nimport { Context, Dict, root, store } from '.'\n\nexport type Disposable = () => void\nexport type Extension = (ctx: Context) => void\n\nexport function defineExtension(callback: Extension) {\n  return callback\n}\n\nconst loaders: Dict<(path: string) => Promise<Disposable>> = {\n  async [`.css`](path) {\n    const link = document.createElement('link')\n    link.rel = 'stylesheet'\n    link.href = path\n    await new Promise((resolve, reject) => {\n      link.onload = resolve\n      link.onerror = reject\n      document.head.appendChild(link)\n    })\n    return () => {\n      document.head.removeChild(link)\n    }\n  },\n  async [``](path) {\n    const exports = await import(/* @vite-ignore */ path)\n    const fork = root.plugin(exports.default)\n    return fork.dispose\n  },\n}\n\nexport interface LoadResult {\n  done: boolean\n  task: Promise<any>\n  isExtension: boolean\n}\n\nexport const progress = ref(0)\n\nfunction notify() {\n  const results = Object.values(extensions)\n  progress.value = results.filter(({ done }) => done).length / results.length\n}\n\nexport function queue(key: string, callback: (key: string) => Promise<any>, isExtension = false) {\n  const task = callback(key)\n  const result = { done: false, task, isExtension }\n  task.finally(() => {\n    result.done = true\n    notify()\n  })\n  if (!extensions[key]) {\n    extensions[key] = result\n    notify()\n  }\n  return task\n}\n\nfunction load(path: string) {\n  for (const ext in loaders) {\n    if (!path.endsWith(ext)) continue\n    return queue(path, loaders[ext], true)\n  }\n}\n\nconst extensions: Dict<LoadResult> = {}\n\nexport const initTask = new Promise<void>((resolve) => {\n  watch(() => store.entry, async (newValue, oldValue) => {\n    newValue ||= []\n    for (const path in extensions) {\n      if (newValue.includes(path)) continue\n      if (!extensions[path].isExtension) continue\n      extensions[path].task.then(dispose => dispose())\n      delete extensions[path]\n    }\n\n    await Promise.all(newValue.map(load))\n\n    if (!oldValue) resolve()\n  }, { deep: true })\n})\n\nexport default load\n", "import { defineProperty } from 'cosmokit'\nimport { Lifecycle } from './events'\nimport { Registry } from './registry'\nimport { getConstructor, isConstructor, resolveConfig } from './utils'\n\nexport interface Context {\n  [Context.config]: Context.Config\n  root: Context.Parameterized<this, this[typeof Context.config]>\n  mapping: Record<string | symbol, symbol>\n  lifecycle: Lifecycle\n  registry: Registry<this>\n}\n\nexport class Context<T = any> {\n  static readonly config = Symbol('config')\n  static readonly events = Symbol('events')\n  static readonly static = Symbol('static')\n  static readonly filter = Symbol('filter')\n  static readonly source = Symbol('source')\n  static readonly current = Symbol('current')\n  static readonly internal = Symbol('internal')\n  static readonly immediate = Symbol('immediate')\n\n  constructor(config?: Context.Config) {\n    const options = resolveConfig(getConstructor(this), config)\n    const attach = (internal: {}) => {\n      if (!internal) return\n      attach(Object.getPrototypeOf(internal))\n      for (const key of Object.getOwnPropertySymbols(internal)) {\n        this[key] = new internal[key](this, options)\n      }\n    }\n\n    this.root = this as any\n    this.mapping = Object.create(null)\n    attach(this[Context.internal])\n  }\n\n  [Symbol.for('nodejs.util.inspect.custom')]() {\n    return `Context <${this.runtime.name}>`\n  }\n\n  get events() {\n    return this.lifecycle\n  }\n\n  /** @deprecated */\n  get state() {\n    return this.scope\n  }\n\n  extend(meta = {}): this {\n    return Object.assign(Object.create(this), meta)\n  }\n\n  isolate(names: string[]) {\n    const mapping = Object.create(this.mapping)\n    for (const name of names) {\n      mapping[name] = Symbol(name)\n    }\n    return this.extend({ mapping })\n  }\n}\n\nexport namespace Context {\n  export type Parameterized<C, T = any> = Omit<C, 'config'> & { config: T }\n\n  export interface Config extends Lifecycle.Config, Registry.Config {}\n\n  export interface MixinOptions {\n    methods?: string[]\n    properties?: string[]\n  }\n\n  export function mixin(name: keyof any, options: MixinOptions) {\n    for (const key of options.methods || []) {\n      const method = defineProperty(function (this: Context, ...args: any[]) {\n        return this[name][key](...args)\n      }, 'name', key)\n      defineProperty(this.prototype, key, method)\n    }\n\n    for (const key of options.properties || []) {\n      Object.defineProperty(this.prototype, key, {\n        configurable: true,\n        get(this: Context) {\n          return this[name][key]\n        },\n        set(this: Context, value: any) {\n          this[name][key] = value\n        },\n      })\n    }\n  }\n\n  export interface ServiceOptions extends MixinOptions {\n    prototype?: any\n  }\n\n  export function service(name: keyof any, options: ServiceOptions = {}) {\n    if (Object.prototype.hasOwnProperty.call(this.prototype, name)) return\n    const privateKey = typeof name === 'symbol' ? name : Symbol(name)\n\n    Object.defineProperty(this.prototype, name, {\n      configurable: true,\n      get(this: Context) {\n        const key = this.mapping[name as any] || privateKey\n        const value = this.root[key]\n        if (!value) return\n        defineProperty(value, Context.current, this)\n        return value\n      },\n      set(this: Context, value) {\n        const key = this.mapping[name] || privateKey\n        const oldValue = this.root[key]\n        if (oldValue === value) return\n\n        // setup filter for events\n        const self = Object.create(null)\n        self[Context.filter] = (ctx: Context) => {\n          return this.mapping[name] === ctx.mapping[name]\n        }\n\n        // check override\n        if (value && oldValue && typeof name === 'string') {\n          throw new Error(`service ${name} has been registered`)\n        }\n\n        if (typeof name === 'string') {\n          this.emit(self, 'internal/before-service', name, value)\n        }\n        this.root[key] = value\n        if (value && typeof value === 'object') {\n          defineProperty(value, Context.source, this)\n        }\n        if (typeof name === 'string') {\n          this.emit(self, 'internal/service', name, oldValue)\n        }\n      },\n    })\n\n    if (isConstructor(options)) {\n      const internal = ensureInternal(this.prototype)\n      internal[privateKey] = options\n    }\n\n    this.mixin(name, options)\n  }\n\n  function ensureInternal(prototype: {}) {\n    if (Object.prototype.hasOwnProperty.call(prototype, Context.internal)) {\n      return prototype[Context.internal]\n    }\n    const parent = ensureInternal(Object.getPrototypeOf(prototype))\n    return prototype[Context.internal] = Object.create(parent)\n  }\n}\n\nContext.prototype[Context.internal] = Object.create(null)\n\nContext.service('registry', Registry)\nContext.service('lifecycle', Lifecycle)\n\nContext.mixin('state', {\n  properties: ['config', 'runtime'],\n  methods: ['collect', 'accept', 'decline'],\n})\n", "import { Awaitable, defineProperty, Promisify, remove } from 'cosmokit'\nimport { Context } from './context'\nimport { EffectScope, ForkScope, MainScope, ScopeStatus } from './scope'\nimport { Plugin } from './registry'\n\nexport function isBailed(value: any) {\n  return value !== null && value !== false && value !== undefined\n}\n\nexport type Parameters<F> = F extends (...args: infer P) => any ? P : never\nexport type ReturnType<F> = F extends (...args: any) => infer R ? R : never\nexport type ThisType<F> = F extends (this: infer T, ...args: any) => any ? T : never\nexport type GetEvents<C extends Context> = C[typeof Context.events]\n\ndeclare module './context' {\n  export interface Context {\n    [Context.events]: Events<this>\n    parallel<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): Promise<void>\n    parallel<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): Promise<void>\n    emit<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): void\n    emit<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): void\n    serial<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): Promisify<ReturnType<GetEvents<this>[K]>>\n    serial<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): Promisify<ReturnType<GetEvents<this>[K]>>\n    bail<K extends keyof GetEvents<this>>(name: K, ...args: Parameters<GetEvents<this>[K]>): ReturnType<GetEvents<this>[K]>\n    bail<K extends keyof GetEvents<this>>(thisArg: ThisType<GetEvents<this>[K]>, name: K, ...args: Parameters<GetEvents<this>[K]>): ReturnType<GetEvents<this>[K]>\n    on<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K], prepend?: boolean): () => boolean\n    once<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K], prepend?: boolean): () => boolean\n    off<K extends keyof GetEvents<this>>(name: K, listener: GetEvents<this>[K]): boolean\n    start(): Promise<void>\n    stop(): Promise<void>\n  }\n}\n\nexport namespace Lifecycle {\n  export interface Config {\n    maxListeners?: number\n  }\n}\n\nexport class Lifecycle {\n  static readonly methods = ['on', 'once', 'off', 'before', 'after', 'parallel', 'emit', 'serial', 'bail', 'start', 'stop']\n\n  isActive = false\n  _tasks = new Set<Promise<void>>()\n  _hooks: Record<keyof any, [Context, (...args: any[]) => any][]> = {}\n\n  constructor(private root: Context) {\n    defineProperty(this, Context.current, root)\n    defineProperty(this.on('internal/hook', function (name, listener, prepend) {\n      const method = prepend ? 'unshift' : 'push'\n      const { scope } = this[Context.current]\n      const { runtime, disposables } = scope\n      if (name === 'ready' && this.isActive) {\n        scope.ensure(async () => listener())\n      } else if (name === 'dispose') {\n        disposables[method](listener as any)\n        defineProperty(listener, 'name', 'event <dispose>')\n        return () => remove(disposables, listener)\n      } else if (name === 'fork') {\n        runtime.forkables[method](listener as any)\n        return scope.collect('event <fork>', () => remove(runtime.forkables, listener))\n      }\n    }), Context.static, root.scope)\n  }\n\n  /** @deprecated */\n  queue(value: any) {\n    this[Context.current].scope.ensure(async () => value)\n  }\n\n  async flush() {\n    while (this._tasks.size) {\n      await Promise.all(Array.from(this._tasks))\n    }\n  }\n\n  * getHooks(name: keyof any, thisArg?: object) {\n    const hooks = this._hooks[name] || []\n    for (const [context, callback] of hooks.slice()) {\n      const filter = thisArg?.[Context.filter]\n      if (filter && !filter.call(thisArg, context)) continue\n      yield callback\n    }\n  }\n\n  async parallel(...args: any[]) {\n    const thisArg = typeof args[0] === 'object' ? args.shift() : null\n    const name = args.shift()\n    await Promise.all([...this.getHooks(name, thisArg)].map(async (callback) => {\n      await callback.apply(thisArg, args)\n    }))\n  }\n\n  emit(...args: any[]) {\n    const thisArg = typeof args[0] === 'object' ? args.shift() : null\n    const name = args.shift()\n    for (const callback of this.getHooks(name, thisArg)) {\n      callback.apply(thisArg, args)\n    }\n  }\n\n  async serial(...args: any[]) {\n    const thisArg = typeof args[0] === 'object' ? args.shift() : null\n    const name = args.shift()\n    for (const callback of this.getHooks(name, thisArg)) {\n      const result = await callback.apply(thisArg, args)\n      if (isBailed(result)) return result\n    }\n  }\n\n  bail(...args: any[]) {\n    const thisArg = typeof args[0] === 'object' ? args.shift() : null\n    const name = args.shift()\n    for (const callback of this.getHooks(name, thisArg)) {\n      const result = callback.apply(thisArg, args)\n      if (isBailed(result)) return result\n    }\n  }\n\n  register(label: string, hooks: [Context, any][], listener: any, prepend?: boolean) {\n    const maxListeners = this.root.config.maxListeners!\n    if (hooks.length >= maxListeners!) {\n      this.root.emit('internal/warning', `max listener count (${maxListeners!}) for ${label} exceeded, which may be caused by a memory leak`)\n    }\n\n    const caller = this[Context.current]\n    const method = prepend ? 'unshift' : 'push'\n    hooks[method]([caller, listener])\n    return caller.state.collect(label, () => this.unregister(hooks, listener))\n  }\n\n  unregister(hooks: [Context, any][], listener: any) {\n    const index = hooks.findIndex(([context, callback]) => callback === listener)\n    if (index >= 0) {\n      hooks.splice(index, 1)\n      return true\n    }\n  }\n\n  on(name: keyof any, listener: (...args: any) => any, prepend = false) {\n    // handle special events\n    const result = this.bail(this, 'internal/hook', name, listener, prepend)\n    if (result) return result\n\n    const hooks = this._hooks[name] ||= []\n    const label = typeof name === 'string' ? `event <${name}>` : 'event (Symbol)'\n    return this.register(label, hooks, listener, prepend)\n  }\n\n  once(name: keyof any, listener: (...args: any) => any, prepend = false) {\n    const dispose = this.on(name, function (...args: any[]) {\n      dispose()\n      return listener.apply(this, args)\n    }, prepend)\n    return dispose\n  }\n\n  off(name: keyof any, listener: (...args: any) => any) {\n    return this.unregister(this._hooks[name] || [], listener)\n  }\n\n  async start() {\n    this.isActive = true\n    const hooks = this._hooks.ready || []\n    while (hooks.length) {\n      const [context, callback] = hooks.shift()!\n      context.scope.ensure(async () => callback())\n    }\n    await this.flush()\n  }\n\n  async stop() {\n    this.isActive = false\n    // `dispose` event is handled by state.disposables\n    this.root.scope.reset()\n  }\n}\n\nexport interface Events<C extends Context = Context> {\n  'fork': Plugin.Function<C['config'], C>\n  'ready'(): Awaitable<void>\n  'dispose'(): Awaitable<void>\n  'internal/fork'(fork: ForkScope<Context.Parameterized<C>>): void\n  'internal/runtime'(runtime: MainScope<Context.Parameterized<C>>): void\n  'internal/status'(scope: EffectScope<Context.Parameterized<C>>, oldValue: ScopeStatus): void\n  'internal/warning'(format: any, ...param: any[]): void\n  'internal/before-service'(name: string, value: any): void\n  'internal/service'(name: string, oldValue: any): void\n  'internal/before-update'(fork: ForkScope<Context.Parameterized<C>>, config: any): void\n  'internal/update'(fork: ForkScope<Context.Parameterized<C>>, oldConfig: any): void\n  'internal/hook'(this: Lifecycle, name: string, listener: Function, prepend: boolean): () => boolean\n}\n", "import { defineProperty } from 'cosmokit'\nimport { Context } from './context'\nimport { ForkScope, MainScope } from './scope'\nimport { resolveConfig } from './utils'\n\nexport function isApplicable(object: Plugin) {\n  return object && typeof object === 'object' && typeof object.apply === 'function'\n}\n\nexport type Plugin<C extends Context = Context> =\n  | Plugin.Function<any, C>\n  | Plugin.Constructor<any, C>\n  | Plugin.Object<any, any, C>\n\nexport namespace Plugin {\n  export type Function<T = any, C extends Context = any> = (ctx: C, options: T) => void\n  export type Constructor<T = any, C extends Context = any> = new (ctx: C, options: T) => void\n\n  export interface Object<S = any, T = any, C extends Context = any> {\n    name?: string\n    apply: Function<T, C>\n    reactive?: boolean\n    reusable?: boolean\n    Config?: (config?: S) => T\n    schema?: (config?: S) => T\n    using?: readonly string[]\n  }\n\n  export type Config<T extends Plugin<any>> =\n    | T extends Constructor<infer U> ? U\n    : T extends Function<infer U> ? U\n    : T extends Object<infer U> ? U\n    : never\n}\n\ndeclare module './context' {\n  export interface Context {\n    using(using: readonly string[], callback: Plugin.Function<void, Context.Parameterized<this>>): ForkScope<Context.Parameterized<this>>\n    plugin<S extends Plugin<Context.Parameterized<this>>, T extends Plugin.Config<S>>(plugin: S, config?: boolean | T): ForkScope<Context.Parameterized<this, T>>\n    /** @deprecated use `ctx.registry.delete()` instead */\n    dispose(plugin?: Plugin<Context.Parameterized<this>>): boolean\n  }\n}\n\nexport namespace Registry {\n  export interface Config {}\n}\n\nexport class Registry<C extends Context = Context> extends Map<Plugin<C>, MainScope<C>> {\n  static readonly methods = ['using', 'plugin', 'dispose']\n\n  private _counter = 0\n\n  constructor(private root: Context, config: Registry.Config) {\n    super()\n    defineProperty(this, Context.current, root)\n    root.scope = new MainScope(this, null!, config)\n    root.scope.runtime.isReactive = true\n  }\n\n  get counter() {\n    return ++this._counter\n  }\n\n  private resolve(plugin: Plugin) {\n    return plugin && (typeof plugin === 'function' ? plugin : plugin.apply)\n  }\n\n  get(plugin: Plugin<C>) {\n    return super.get(this.resolve(plugin))\n  }\n\n  has(plugin: Plugin<C>) {\n    return super.has(this.resolve(plugin))\n  }\n\n  set(plugin: Plugin<C>, state: MainScope<C>) {\n    return super.set(this.resolve(plugin), state)\n  }\n\n  delete(plugin: Plugin<C>) {\n    plugin = this.resolve(plugin)\n    const runtime = this.get(plugin)\n    if (!runtime) return false\n    super.delete(plugin)\n    return runtime.dispose()\n  }\n\n  using(using: readonly string[], callback: Plugin.Function<void, C>) {\n    return this.plugin({ using, apply: callback, name: callback.name })\n  }\n\n  plugin(plugin: Plugin<C>, config?: any) {\n    // check if it's a valid plugin\n    if (typeof plugin !== 'function' && !isApplicable(plugin)) {\n      throw new Error('invalid plugin, expect function or object with an \"apply\" method')\n    }\n\n    // resolve plugin config\n    config = resolveConfig(plugin, config)\n    if (!config) return\n\n    // check duplication\n    const context = this[Context.current]\n    let runtime = this.get(plugin)\n    if (runtime) {\n      if (!runtime.isForkable) {\n        this.root.emit('internal/warning', `duplicate plugin detected: ${plugin.name}`)\n      }\n      return runtime.fork(context, config)\n    }\n\n    runtime = new MainScope(this, plugin, config)\n    return runtime.fork(context, config)\n  }\n\n  dispose(plugin: Plugin<C>) {\n    return this.delete(plugin)\n  }\n}\n", "import { deepEqual, defineProperty, remove } from 'cosmokit'\nimport { Context } from './context'\nimport { Plugin, Registry } from './registry'\nimport { getConstructor, isConstructor, resolveConfig } from './utils'\n\ndeclare module './context' {\n  export interface Context<T> {\n    config: T\n    scope: EffectScope<this>\n    runtime: MainScope<this>\n    collect(label: string, callback: () => boolean): () => boolean\n    accept(callback?: (config: this['config']) => void | boolean, options?: AcceptOptions): () => boolean\n    accept(keys: (keyof this['config'])[], callback?: (config: this['config']) => void | boolean, options?: AcceptOptions): () => boolean\n    decline(keys: (keyof this['config'])[]): () => boolean\n  }\n}\n\nexport type Disposable = () => void\n\nexport interface AcceptOptions {\n  passive?: boolean\n  immediate?: boolean\n}\n\nexport interface Acceptor extends AcceptOptions {\n  keys?: string[]\n  callback?: (config: any) => void | boolean\n}\n\nexport type ScopeStatus = 'pending' | 'loading' | 'active' | 'failed' | 'disposed'\n\nexport abstract class EffectScope<C extends Context = Context> {\n  public uid: number | null\n  public ctx: C\n  public disposables: Disposable[] = []\n  public error: any\n  public status: ScopeStatus = 'pending'\n\n  protected proxy: any\n  protected context: Context\n  protected acceptors: Acceptor[] = []\n  protected tasks = new Set<Promise<void>>()\n  protected hasError = false\n\n  abstract runtime: MainScope<C>\n  abstract dispose(): boolean\n  abstract start(): void\n  abstract update(config: C['config'], forced?: boolean): void\n\n  constructor(public parent: C, public config: C['config']) {\n    this.uid = parent.registry ? parent.registry.counter : 0\n    this.ctx = this.context = parent.extend({ scope: this })\n    this.proxy = new Proxy({}, {\n      get: (target, key) => Reflect.get(this.config, key),\n    })\n  }\n\n  protected get _config() {\n    return this.runtime.isReactive ? this.proxy : this.config\n  }\n\n  collect(label: string, callback: () => boolean) {\n    const dispose = defineProperty(() => {\n      remove(this.disposables, dispose)\n      return callback()\n    }, 'name', label)\n    this.disposables.push(dispose)\n    return dispose\n  }\n\n  restart() {\n    this.reset()\n    this.start()\n  }\n\n  protected _getStatus() {\n    if (this.uid === null) return 'disposed'\n    if (this.hasError) return 'failed'\n    if (this.tasks.size) return 'loading'\n    if (this.ready) return 'active'\n    return 'pending'\n  }\n\n  protected _updateStatus(callback?: () => void) {\n    const oldValue = this.status\n    callback?.()\n    this.status = this._getStatus()\n    if (oldValue !== this.status) {\n      this.context.emit('internal/status', this, oldValue)\n    }\n  }\n\n  ensure(callback: () => Promise<void>) {\n    const task = callback()\n      .catch((reason) => {\n        this.context.emit('internal/warning', reason)\n        this.cancel(reason)\n      })\n      .finally(() => {\n        this._updateStatus(() => this.tasks.delete(task))\n        this.context.events._tasks.delete(task)\n      })\n    this._updateStatus(() => this.tasks.add(task))\n    this.context.events._tasks.add(task)\n  }\n\n  cancel(reason: any) {\n    this.error = reason\n    this._updateStatus(() => this.hasError = true)\n    this.reset()\n  }\n\n  protected setup() {\n    if (!this.runtime.using.length) return\n    defineProperty(this.context.on('internal/before-service', (name) => {\n      if (!this.runtime.using.includes(name)) return\n      this._updateStatus()\n      this.reset()\n    }), Context.static, this)\n    defineProperty(this.context.on('internal/service', (name) => {\n      if (!this.runtime.using.includes(name)) return\n      this.start()\n    }), Context.static, this)\n  }\n\n  get ready() {\n    return this.runtime.using.every(name => this.ctx[name])\n  }\n\n  reset() {\n    this.disposables = this.disposables.splice(0, Infinity).filter((dispose) => {\n      if (this.uid !== null && dispose[Context.static] === this) return true\n      dispose()\n    })\n  }\n\n  accept(callback?: (config: C['config']) => void | boolean, options?: AcceptOptions): () => boolean\n  accept(keys: string[], callback?: (config: C['config']) => void | boolean, options?: AcceptOptions): () => boolean\n  accept(...args: any[]) {\n    const keys = Array.isArray(args[0]) ? args.shift() : null\n    const acceptor: Acceptor = { keys, callback: args[0], ...args[1] }\n    this.acceptors.push(acceptor)\n    if (acceptor.immediate) acceptor.callback?.(this.config)\n    return this.collect(`accept <${keys?.join(', ') || '*'}>`, () => remove(this.acceptors, acceptor))\n  }\n\n  decline(keys: string[]) {\n    return this.accept(keys, () => true)\n  }\n\n  checkUpdate(resolved: any, forced?: boolean) {\n    if (forced) return [true, true]\n    if (forced === false) return [false, false]\n\n    const modified: Record<string, boolean> = Object.create(null)\n    const checkPropertyUpdate = (key: string) => {\n      const result = modified[key] ??= !deepEqual(this.config[key], resolved[key])\n      hasUpdate ||= result\n      return result\n    }\n\n    const ignored = new Set<string>()\n    let hasUpdate = false, shouldRestart = false\n    let fallback: boolean | null = this.runtime.isReactive || null\n    for (const { keys, callback, passive } of this.acceptors) {\n      if (!keys) {\n        fallback ||= !passive\n      } else if (passive) {\n        keys?.forEach(key => ignored.add(key))\n      } else {\n        let hasUpdate = false\n        for (const key of keys) {\n          hasUpdate ||= checkPropertyUpdate(key)\n        }\n        if (!hasUpdate) continue\n      }\n      const result = callback?.(resolved)\n      if (result) shouldRestart = true\n    }\n\n    for (const key in { ...this.config, ...resolved }) {\n      if (fallback === false) continue\n      if (!(key in modified) && !ignored.has(key)) {\n        const hasUpdate = checkPropertyUpdate(key)\n        if (fallback === null) shouldRestart ||= hasUpdate\n      }\n    }\n    return [hasUpdate, shouldRestart]\n  }\n}\n\nexport class ForkScope<C extends Context = Context> extends EffectScope<C> {\n  dispose: () => boolean\n\n  constructor(parent: Context, config: C['config'], public runtime: MainScope<C>) {\n    super(parent as C, config)\n\n    this.dispose = defineProperty(parent.scope.collect(`fork <${parent.runtime.name}>`, () => {\n      this.uid = null\n      this.reset()\n      const result = remove(runtime.disposables, this.dispose)\n      if (remove(runtime.children, this) && !runtime.children.length) {\n        parent.registry.delete(runtime.plugin)\n      }\n      this.context.emit('internal/fork', this)\n      return result\n    }), Context.static, runtime)\n\n    runtime.children.push(this)\n    runtime.disposables.push(this.dispose)\n    this.context.emit('internal/fork', this)\n    if (runtime.isReusable) {\n      // non-reusable plugin forks are not responsive to isolated service changes\n      this.setup()\n    }\n    this.start()\n  }\n\n  start() {\n    if (!this.ready) return\n    this._updateStatus(() => this.hasError = false)\n    for (const fork of this.runtime.forkables) {\n      this.ensure(async () => fork(this.context, this._config))\n    }\n  }\n\n  update(config: any, forced?: boolean) {\n    const oldConfig = this.config\n    const state: EffectScope<C> = this.runtime.isForkable ? this : this.runtime\n    if (state.config !== oldConfig) return\n    const resolved = resolveConfig(this.runtime.plugin, config)\n    const [hasUpdate, shouldRestart] = state.checkUpdate(resolved, forced)\n    this.context.emit('internal/before-update', this, config)\n    this.config = resolved\n    state.config = resolved\n    if (hasUpdate) {\n      this.context.emit('internal/update', this, oldConfig)\n    }\n    if (shouldRestart) state.restart()\n  }\n}\n\nexport class MainScope<C extends Context = Context> extends EffectScope<C> {\n  runtime = this\n  schema: any\n  using: readonly string[] = []\n  forkables: Function[] = []\n  children: ForkScope<C>[] = []\n  isReusable = false\n  isReactive = false\n\n  constructor(registry: Registry<C>, public plugin: Plugin, config: any) {\n    super(registry[Context.current] as C, config)\n    registry.set(plugin, this)\n    if (plugin) this.setup()\n  }\n\n  get isForkable() {\n    return this.forkables.length > 0\n  }\n\n  get name() {\n    if (!this.plugin) return 'root'\n    const { name } = this.plugin\n    return !name || name === 'apply' ? 'anonymous' : name\n  }\n\n  fork(parent: Context, config: any) {\n    return new ForkScope(parent, config, this)\n  }\n\n  dispose() {\n    this.uid = null\n    this.reset()\n    this.context.emit('internal/runtime', this)\n    return true\n  }\n\n  setup() {\n    this.schema = this.plugin['Config'] || this.plugin['schema']\n    this.using = this.plugin['using'] || []\n    this.isReusable = this.plugin['reusable']\n    this.isReactive = this.plugin['reactive']\n    this.context.emit('internal/runtime', this)\n\n    if (this.isReusable) {\n      this.forkables.push(this.apply)\n    } else {\n      super.setup()\n    }\n\n    this.restart()\n  }\n\n  private apply = (context: Context, config: any) => {\n    const plugin = this.plugin\n    if (typeof plugin !== 'function') {\n      this.ensure(async () => plugin.apply(context, config))\n    } else if (isConstructor(plugin)) {\n      // eslint-disable-next-line new-cap\n      const instance = new plugin(context, config)\n      const name = instance[Context.immediate]\n      if (name) {\n        context[name] = instance\n      }\n      if (instance['fork']) {\n        this.forkables.push(instance['fork'].bind(instance))\n      }\n    } else {\n      this.ensure(async () => plugin(context, config))\n    }\n  }\n\n  reset() {\n    super.reset()\n    for (const fork of this.children) {\n      fork.reset()\n    }\n  }\n\n  start() {\n    if (!this.ready) return\n    this._updateStatus(() => this.hasError = false)\n\n    // execute plugin body\n    if (!this.isReusable && this.plugin) {\n      this.apply(this.context, this._config)\n    }\n\n    for (const fork of this.children) {\n      fork.start()\n    }\n  }\n\n  update(config: C['config'], forced?: boolean) {\n    if (this.isForkable) {\n      this.context.emit('internal/warning', `attempting to update forkable plugin \"${this.plugin.name}\", which may lead to unexpected behavior`)\n    }\n    const oldConfig = this.config\n    const resolved = resolveConfig(this.runtime.plugin || getConstructor(this.context), config)\n    const [hasUpdate, shouldRestart] = this.checkUpdate(resolved, forced)\n    const state = this.children.find(fork => fork.config === oldConfig)\n    this.config = resolved\n    if (state) {\n      this.context.emit('internal/before-update', state, config)\n      state.config = resolved\n      if (hasUpdate) {\n        this.context.emit('internal/update', state, oldConfig)\n      }\n    }\n    if (shouldRestart) this.restart()\n  }\n}\n", "export function isConstructor(func: any): func is new (...args: any) => any {\n  // async function or arrow function\n  if (!func.prototype) return false\n  // generator function or malformed definition\n  if (func.prototype.constructor !== func) return false\n  return true\n}\n\nexport function getConstructor(instance: any) {\n  return Object.getPrototypeOf(instance).constructor\n}\n\nexport function resolveConfig(plugin: any, config: any) {\n  if (config === false) return\n  if (config === true) config = undefined\n  config ??= {}\n\n  const schema = plugin['Config'] || plugin['schema']\n  if (schema && plugin['schema'] !== false) config = schema(config)\n  return config\n}\n", "import { Awaitable, defineProperty } from 'cosmokit'\nimport { Context } from './context'\nimport { getConstructor } from './utils'\n\nexport class Service<C extends Context = Context> {\n  protected start(): Awaitable<void> {}\n  protected stop(): Awaitable<void> {}\n  protected fork?(ctx: C, config: any): void\n\n  constructor(protected ctx: C, name: string, immediate?: boolean) {\n    getConstructor(ctx.root).service(name)\n    defineProperty(this, Context.current, ctx)\n\n    if (immediate) {\n      this[Context.immediate] = name\n    }\n\n    ctx.on('ready', async () => {\n      // await until next tick because derived class has not been initialized yet\n      await Promise.resolve()\n      await this.start()\n      ctx[name] = this\n    })\n\n    ctx.on('dispose', async () => {\n      ctx[name] = null\n      await this.stop()\n    })\n  }\n\n  get caller() {\n    return this[Context.current] as C\n  }\n}\n", "import { Component, reactive } from 'vue'\nimport { MaybeComputedRef, resolveUnref } from '@vueuse/core'\nimport { Dict, Disposable, Field, omit, root, router, store } from '.'\n\ndeclare module 'vue-router' {\n  interface RouteMeta {\n    activity?: Activity\n  }\n}\n\nexport namespace Activity {\n  export interface BaseOptions {\n    name: MaybeComputedRef<string>\n    desc?: MaybeComputedRef<string>\n    icon?: MaybeComputedRef<string>\n    order?: number\n    authority?: number\n    position?: 'top' | 'bottom'\n    fields?: Field[]\n    when?: () => boolean\n  }\n\n  export interface RouteOptions extends BaseOptions {\n    id?: string\n    path: string\n    strict?: boolean\n    component: Component\n  }\n\n  export interface ButtonOptions extends BaseOptions {\n    id: string\n    action: () => void\n  }\n\n  export type Options = RouteOptions | ButtonOptions\n}\n\nexport const activities = reactive<Dict<Activity>>({})\n\nexport interface Activity extends Activity.BaseOptions {\n  id: string\n  path?: string\n  component?: Component\n  action?: () => void\n}\n\nexport class Activity {\n  _disposables: Disposable[] = []\n\n  constructor(public options: Activity.Options) {\n    Object.assign(this, omit(options, ['icon', 'name', 'desc', 'position']))\n    if ('path' in options) {\n      const { path, id = path, component } = options\n      this._disposables.push(router.addRoute({ path, name: id, component, meta: { activity: this } }))\n      this.id ??= path\n      this.handleUpdate()\n    }\n    this.order ??= 0\n    this.authority ??= 0\n    this.fields ??= []\n    activities[this.id] = this\n  }\n\n  handleUpdate() {\n    const { redirect } = router.currentRoute.value.query\n    if (typeof redirect === 'string') {\n      const location = router.resolve(redirect)\n      if (location.matched.length) {\n        router.replace(location)\n      }\n    }\n  }\n\n  get icon() {\n    return resolveUnref(this.options.icon ?? 'activity:default')\n  }\n\n  get name() {\n    return resolveUnref(this.options.name ?? this.id)\n  }\n\n  get desc() {\n    return resolveUnref(this.options.desc)\n  }\n\n  get position() {\n    if (root.bail('activity', this)) return\n    if (!this.fields.every(key => store[key])) return\n    if (this.when && !this.when()) return\n    return this.options.position ?? 'top'\n  }\n\n  dispose() {\n    this._disposables.forEach(dispose => dispose())\n    const current = router.currentRoute.value\n    if (current?.meta?.activity === this) {\n      router.push({\n        path: '/',\n        query: { redirect: current.fullPath },\n      })\n    }\n    if (activities[this.id]) {\n      delete activities[this.id]\n      return true\n    }\n  }\n}\n", "import * as cordis from 'cordis'\nimport { Dict, remove } from 'cosmokit'\nimport { App, Component, markRaw, reactive } from 'vue'\nimport { Activity } from './activity'\n\n// layout api\n\nexport type Computed<T> = T | (() => T)\n\nexport interface SlotOptions {\n  type: string\n  order?: number\n  component: Component\n}\n\nexport const views = reactive<Dict<SlotOptions[]>>({})\n\nexport interface Events<C extends Context> extends cordis.Events<C> {\n  'activity'(activity: Activity): boolean\n}\n\nexport interface Context {\n  [Context.events]: Events<this>\n}\n\nexport class Context extends cordis.Context {\n  static app: App\n\n  /** @deprecated */\n  addView(options: SlotOptions) {\n    return this.slot(options)\n  }\n\n  /** @deprecated */\n  addPage(options: Activity.Options) {\n    return this.page(options)\n  }\n\n  slot(options: SlotOptions) {\n    options.order ??= 0\n    markRaw(options.component)\n    const list = views[options.type] ||= []\n    const index = list.findIndex(a => a.order < options.order)\n    if (index >= 0) {\n      list.splice(index, 0, options)\n    } else {\n      list.push(options)\n    }\n    return this.scope.collect('view', () => remove(list, options))\n  }\n\n  page(options: Activity.Options) {\n    const activity = new Activity(options)\n    return this.scope.collect('page', () => {\n      return activity.dispose()\n    })\n  }\n}\n"],
  "mappings": "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",
  "names": ["html", "__name", "sanitize", "Time", "template", "Schema", "__name", "refs", "options", "pattern", "date", "key", "root", "src_default", "Filter", "Comment", "injections", "ref", "root", "src_default", "__name", "root", "Context", "__publicField", "config", "defineProperty", "remove", "hasUpdate", "registry", "location", "Context", "Context", "Card"]
}
